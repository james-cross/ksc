// Base layout
body {
	margin: 0;
	padding: 0;
	background-color: $color-background;
}

.container {
	max-width: $container-max-width;
	margin: 0 auto;
}

.box {
	background-color: $color-background;
	box-shadow: $shadow-box;
	padding: $spacing-md;
	border-radius: $border-radius;
}

// Breadcrumbs
.breadcrumbs {
	margin-bottom: $spacing-xs;
	font-size: 1.6rem;

	ol {
		list-style: none;
		padding: 0;
		margin: 0;
		display: flex;
		flex-wrap: wrap;
		gap: $spacing-xs;
	}

	li {
		display: flex;
		align-items: center;

		&:not(:last-child)::after {
			content: "/";
			margin-left: $spacing-xs;
			color: $color-text-light;
		}

		&[aria-current="page"] {
			color: $color-text-light;
		}
	}

	a {
		color: $color-primary;

		&:hover {
			color: $color-accent;
		}
	}
}

// Page title (h1 on content pages)
h1.page-title {
	font-size: 3.6rem;
	line-height: 1.5;
	float: none;
	color: $color-text;
	margin: 0 0 $spacing-md 0;
}

// Header
header {
	background-repeat: no-repeat;

	.container {
		text-align: center;
	}

	@media (max-width: $mobile-break) {
		background-repeat: repeat;
		display: flex;
		align-items: center;
		justify-content: center;
		min-height: 280px;
		padding-top: 0;
		padding-bottom: 0;

		.container,
		nav {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
		}

		// Hide the desktop heading elements that take up space
		h1,
		.sub-heading {
			display: none;
		}

		.minor-heading {
			margin: 0;
		}

		.minor-sub-heading {
			margin: 0;
		}
	}

	@media (min-width: $mobile-break) {
		&.main-hero {
			height: 60vh;

			h1 {
				font-size: 8rem;
				opacity: 0;
				transform: translateY(0px);
				animation: fadeInUp 1.5s forwards;
			}

			.sub-heading {
				font-size: 3rem;
				opacity: 0;
				transform: translateY(0px);
				animation: fadeInUp 1.5s forwards;
			}

			.minor-heading,
			.minor-sub-heading,
			.logo {
				display: none;
			}
		}

		.container {
			text-align: right;
		}
	}

	nav {
		max-width: 100%;
		border-bottom: 2px solid $color-white;

		ul {
			list-style: none;
			margin: 0;
			padding: 0;

			li {
				display: inline-block;
				margin: 0 $spacing-xs;
			}
		}
	}

	a {
		color: $color-white;

		&.active {
			border-bottom: 2px solid;
		}

		&:focus {
			outline: 2px solid $color-white;
			outline-offset: 2px;
		}
	}
}

// Mobile navigation toggle
.nav-toggle {
	display: none;
	background: transparent;
	border: none;
	cursor: pointer;
	padding: $spacing-xs;
	position: absolute;
	top: $spacing-sm;
	right: $spacing-sm;
	z-index: $z-index-fixed + 1;

	@media (max-width: $mobile-break) {
		display: flex;
		flex-direction: column;
		justify-content: space-between;
		width: 30px;
		height: 24px;
	}

	&:focus {
		outline: 2px solid $color-white;
		outline-offset: 2px;
	}
}

.nav-toggle-bar {
	display: block;
	width: 100%;
	height: 3px;
	background-color: $color-white;
	transition: transform $transition-fast, opacity $transition-fast;
}

.nav-toggle[aria-expanded="true"] {
	.nav-toggle-bar:nth-child(1) {
		transform: translateY(10px) rotate(45deg);
	}

	.nav-toggle-bar:nth-child(2) {
		opacity: 0;
	}

	.nav-toggle-bar:nth-child(3) {
		transform: translateY(-10px) rotate(-45deg);
	}
}

.nav-menu {
	@media (max-width: $mobile-break) {
		display: none;
		position: absolute;
		top: 60px;
		left: 0;
		right: 0;
		background-color: rgba(0, 0, 0, 0.9);
		padding: $spacing-md;
		z-index: $z-index-fixed;

		&.is-open {
			display: block;
		}

		li {
			display: block;
			margin: $spacing-sm 0;
			text-align: center;
		}

		a {
			display: block;
			padding: $spacing-xs;
		}
	}
}

@keyframes fadeInUp {
	from {
		opacity: 0;
		transform: translateY(50px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

// Footer
footer {
	position: relative;
	font-size: 1.9rem;

	a {
		color: $color-text;

		&.active {
			border-bottom: 2px solid;
		}
	}

	h2 {
		font-size: 2.5rem;
		margin: 0 0 $spacing-lg 0;
	}

	.footer-columns {
		display: flex;
		flex-flow: wrap;
		margin: -$spacing-xs -$spacing-xs $spacing-xs -$spacing-xs;
	}

	.legal-line {
		width: 100%;
		padding: $spacing-lg 0 0 0;
		margin: 0;

		a {
			font-style: italic;
		}
	}
}

.footer-links {
	flex: 1 0 180px;
	margin: $spacing-xs;
	padding: 0;

	li {
		list-style: none;
		margin: $spacing-sm 0;

		a {
			svg {
				fill: $color-text;
				margin-right: $spacing-xs;
				transition: fill $transition-fast;
				vertical-align: middle;
				position: relative;
				top: -2px;
				width: 22px;
				height: 22px;
			}

			&:hover svg {
				fill: #73a9c9;
			}
		}
	}
}

// Sections
header,
footer,
section,
main {
	padding: $spacing-lg $spacing-md;

	@media (min-width: $mobile-break) {
		padding: $spacing-3xl $spacing-xl;
	}
}

.content img {
	max-width: 100%;
	max-height: 100%;
	height: auto;
	border-radius: $border-radius;
}

.main {
	@extend .light-section;
	font-size: 2rem;
}

.light-section {
	position: relative;
	background-color: $color-background-alt;
	box-shadow: $shadow-inset-light;
}

.dark-section {
	background-color: $color-dark;
	color: $color-text-muted;
	box-shadow: $shadow-inset-dark;

	a {
		color: #efefef;
		transition: color $transition-fast;

		&:hover {
			color: $color-background;
		}
	}
}

.map-section {
	padding: 0;

	#map {
		height: 300px;
	}
}

.quote-section {
	@extend .dark-section;
	font-size: 2.5rem;
	padding: $spacing-2xl $spacing-md;

	.container {
		max-width: $container-wide;
		text-align: center;
	}
}

// Staff
.staff-list {
	list-style: none;
	margin: 0;
	padding: 0;
	flex-wrap: wrap;
	margin: 0 -$spacing-md;

	.staff {
		margin: $spacing-md;
	}
}

.staff {
	@extend .box;
	flex: 1 1 300px;
	flex-wrap: wrap;
	margin: $spacing-md 0;

	p {
		margin: 0;
	}

	small {
		opacity: 0.6;
		font-size: 1.7rem;
	}
}

.staff-info {
	list-style: none;
	margin: 0;
	padding: 0;
}

.staff-details {
	margin: 0;
	display: flex;

	.staff-image {
		margin-right: $spacing-md;

		img {
			clip-path: circle();
		}
	}
}

// Posts
.post-list {
	list-style: none;
	padding: 0;
}

.pagination {
	margin-top: $spacing-lg;
	display: flex;
	justify-content: space-around;
	text-align: center;
	align-items: center;

	a,
	span {
		flex: 1;
	}
}

.post-comments {
	@extend .box;
	margin-top: $spacing-md;
}

.post-summary {
	@extend .box;
	display: flex;
	flex-direction: column;

	@media (min-width: $mobile-break) {
		flex-direction: row;
		flex-wrap: wrap;
	}

	&:not(:last-child) {
		margin-bottom: $spacing-lg;
	}
}

.post-summary-excerpt {
	margin-bottom: 0;
}

.post-summary-content.has-post-summary-image {
	flex: 0 1 75%;
}

.post-summary-image {
	flex: 0 1 25%;
	box-sizing: border-box;
	margin-bottom: $spacing-sm;

	@media (min-width: $mobile-break) {
		margin-bottom: 0;
		padding-right: $spacing-md;
	}
}

.post-summary-details {
	color: $color-text-light;
	font-size: 1.9rem;
}

.post-summary-author {
	display: flex;
	align-items: center;
	color: $color-text-light;
	margin: 1em 0;

	img {
		max-width: 30px;
		max-height: 30px;
		border-radius: $border-radius-round;
		margin-right: $spacing-xs;
		position: relative;
		top: -2px;
	}
}

// Layout utilities
.columns {
	display: flex;
	flex-wrap: wrap;
	margin: 0 -$spacing-md;

	.column {
		flex: 1 1 250px;
		margin: 0 $spacing-md $spacing-md $spacing-md;
	}
}

.contact-info {
	margin: 0 0 25px 0;
}

.logo {
	float: left;
	width: 50px;
}

// Components
.scroll-up-button {
	all: unset;
	position: fixed;
	bottom: 25px;
	right: 30px;
	height: 90px;
	width: 90px;
	background-color: $color-primary;
	border-radius: $border-radius-pill;
	display: flex;
	align-items: center;
	justify-content: center;
	cursor: pointer;
	opacity: 0;
	visibility: hidden;
	transition: opacity $transition-fast, visibility $transition-fast;

	&.is-visible {
		opacity: 1;
		visibility: visible;
	}

	&:focus {
		outline: 2px solid $color-text;
		outline-offset: 2px;
	}

	.arrow-up {
		width: 28px;
		height: 28px;
		border-left: 4px solid $color-background-alt;
		border-bottom: 4px solid $color-background-alt;
		transform: rotate(135deg);
		margin-bottom: -14px;
		pointer-events: none;
	}
}

.contact-btn {
	padding: $spacing-xs $spacing-sm;
	background-color: $color-primary;
	font-size: 2rem;
	color: $color-background;
	cursor: pointer;
	border-radius: 5px;
	margin-top: $spacing-md;

	&:hover {
		box-shadow: 0;
		transition: $transition-fast ease-in-out;
		color: $color-background;
		background-color: $color-accent;
	}

	&:focus {
		outline: 2px solid $color-text;
		outline-offset: 2px;
	}
}

.hrule {
	margin-top: $spacing-lg;
	color: $color-primary;
}

.cta-container {
	margin-top: $spacing-md;
}

// 404 Error page
.error-page {
	text-align: center;
	padding: $spacing-xl 0;

	h2 {
		font-size: 4rem;
		margin-bottom: $spacing-md;
	}

	p {
		font-size: 2rem;
		margin-bottom: $spacing-md;
	}
}

.error-links {
	list-style: none;
	padding: 0;
	margin: $spacing-lg 0;
	display: flex;
	flex-wrap: wrap;
	justify-content: center;
	gap: $spacing-md;

	li {
		margin: 0;
	}

	a {
		display: inline-block;
		padding: $spacing-xs $spacing-md;
		background-color: $color-background;
		border-radius: $border-radius;
		box-shadow: $shadow-box;

		&:hover {
			background-color: $color-accent;
			color: $color-text;
		}
	}
}

.error-contact {
	margin-top: $spacing-xl;
	color: $color-text-light;
}

// Contact page iframe
.contact-map-embed {
	border: 0;
	margin-top: $spacing-md;
}

// Accessibility
@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
	}
}

// Skip link (visually hidden until focused)
.skip-link {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0, 0, 0, 0);
	white-space: nowrap;
	border: 0;

	&:focus {
		position: fixed;
		top: 0;
		left: 0;
		width: auto;
		height: auto;
		padding: 8px 16px;
		margin: 0;
		overflow: visible;
		clip: auto;
		white-space: normal;
		background: $color-primary;
		color: $color-white;
		z-index: $z-index-fixed;
	}
}
